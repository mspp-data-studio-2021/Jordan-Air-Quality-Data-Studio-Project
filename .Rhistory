view(regression_line_graph_1)
my.formula <- y ~ x
ggplot(data = merged_data) +
aes(x = deaths, y = aqi, color = factor(pollutant)) +
geom_point(size = 0.5, alpha = 0.25) +
geom_smooth(method=lm, se=TRUE, show.legend=TRUE,formula = my.formula) +
stat_poly_eq(formula = my.formula,
aes(label = paste(..eq.label.., ..rr.label.., sep = "~~~")),
parse = TRUE) +
coord_cartesian(ylim = c(0,165)) +
labs(
title = "Regression of AQI on COVID Deaths",
subtitle = "Factored via Sex",
x = "COVID Deaths",
y = "Pollutant AQI levels",
caption = "Source: EPA and NYS Health",
)
my.formula <- y ~ x
ggplot(data = merged_data) +
aes(x = deaths, y = aqi, color = factor(pollutant)) +
geom_point(size = 0.5, alpha = 0.25) +
geom_smooth(method=lm, se=TRUE, show.legend=TRUE,formula = my.formula) +
stat_poly_eq(formula = my.formula,
aes(label = paste(..eq.label.., ..rr.label.., sep = "~~~")),
parse = TRUE) +
coord_cartesian(ylim = c(0,156)) +
labs(
title = "Regression of AQI on COVID Deaths",
subtitle = "Factored via Sex",
x = "COVID Deaths",
y = "Pollutant AQI levels",
caption = "Source: EPA and NYS Health",
)
my.formula <- y ~ x
regression_line_graph_1 <- ggplot(data = merged_data) +
aes(x = deaths, y = aqi, color = factor(pollutant)) +
geom_point(size = 0.5, alpha = 0.25) +
geom_smooth(method=lm, se=TRUE, show.legend=TRUE,formula = my.formula) +
stat_poly_eq(formula = my.formula,
aes(label = paste(..eq.label.., ..rr.label.., sep = "~~~")),
parse = TRUE) +
coord_cartesian(ylim = c(0,156)) +
labs(
title = "Regression of AQI on COVID Deaths",
subtitle = "Factored via Sex",
x = "COVID Deaths",
y = "Pollutant AQI levels",
caption = "Source: EPA and NYS Health",
)
View(regression_results)
View(regression_line_graph_1)
my.formula <- y ~ x
regression_line_graph_1 <- ggplot(data = merged_data) +
aes(x = deaths, y = aqi, color = factor(pollutant)) +
geom_point(size = 0.5, alpha = 0.25) +
geom_smooth(method=lm, se=TRUE, show.legend=TRUE,formula = my.formula) +
stat_poly_eq(formula = my.formula,
aes(label = paste(..eq.label.., ..rr.label.., sep = "~~~")),
parse = TRUE) +
coord_cartesian(ylim = c(0,156)) +
labs(
title = "Regression of AQI on COVID Deaths",
subtitle = "Factored via Sex",
x = "COVID Deaths",
y = "Pollutant AQI levels",
caption = "Source: EPA and NYS Health",
)
view(regression_line_graph_1)
my.formula <- y ~ x
ggplot(data = merged_data) +
aes(x = deaths, y = aqi, color = factor(pollutant)) +
geom_point(size = 0.5, alpha = 0.25) +
geom_smooth(method=lm, se=TRUE, show.legend=TRUE,formula = my.formula) +
stat_poly_eq(formula = my.formula,
aes(label = paste(..eq.label.., ..rr.label.., sep = "~~~")),
parse = TRUE) +
coord_cartesian(ylim = c(0,156)) +
labs(
title = "Regression of AQI on COVID Deaths",
subtitle = "Factored via Sex",
x = "COVID Deaths",
y = "Pollutant AQI levels",
caption = "Source: EPA and NYS Health",
)
my.formula <- y ~ x
ggplot(data = merged_data) +
aes(x = deaths, y = aqi, color = pollutant) +
geom_point(size = 0.5, alpha = 0.25) +
geom_smooth(method=lm, se=TRUE, show.legend=TRUE,formula = my.formula) +
stat_poly_eq(formula = my.formula,
aes(label = paste(..eq.label.., ..rr.label.., sep = "~~~")),
parse = TRUE) +
coord_cartesian(ylim = c(0,156)) +
labs(
title = "Regression of AQI on COVID Deaths",
subtitle = "By Pollutant",
x = "COVID Deaths",
y = "Pollutant AQI levels",
caption = "Source: EPA and NYS Health",
)
my.formula <- y ~ x
ggplot(data = merged_data) +
aes(x = deaths, y = aqi, color = Pollutant) +
geom_point(size = 0.5, alpha = 0.25) +
geom_smooth(method=lm, se=TRUE, show.legend=TRUE,formula = my.formula) +
stat_poly_eq(formula = my.formula,
aes(label = paste(..eq.label.., ..rr.label.., sep = "~~~")),
parse = TRUE) +
coord_cartesian(ylim = c(0,156)) +
labs(
title = "Regression of AQI on COVID Deaths",
subtitle = "By Pollutant",
x = "COVID Deaths",
y = "Pollutant AQI levels",
caption = "Source: EPA and NYS Health",
)
my.formula <- y ~ x
ggplot(data = merged_data) +
aes(x = deaths, y = aqi, color = pollutant) +
geom_point(size = 0.5, alpha = 0.25) +
geom_smooth(method=lm, se=TRUE, show.legend=TRUE,formula = my.formula) +
stat_poly_eq(formula = my.formula,
aes(label = paste(..eq.label.., ..rr.label.., sep = "~~~")),
parse = TRUE) +
coord_cartesian(ylim = c(0,156)) +
labs(
title = "Regression of AQI on COVID Deaths",
subtitle = "By Pollutant",
x = "COVID Deaths",
y = "Pollutant AQI levels",
caption = "Source: EPA and NYS Health",
)
AQI_over_time_graph <- ggplot(merged_data) +
aes(x = date, y = aqi, fill = pollutant) +
geom_col(stat = "identity", position = "dodge") +
scale_x_continuous(breaks = 2007:2017) +
scale_y_continuous(labels = scales::label_number_si()) +
scale_fill_discrete(labels = c("BK" = "Brooklyn", "MN" = "Manhattan")) +
labs(
title = "AQI levels from March 2020-March 2021",
subtitle = "By Pollutant: Ozone and PM2.5",
fill = NULL,
x = "Date",
y = "AQI Level",
caption = "Source: EPA"
)
view(AQI_over_time_graph)
ggplot(merged_data) +
aes(x = date, y = aqi, fill = pollutant) +
geom_col(stat = "identity", position = "dodge") +
scale_x_continuous(breaks = 2007:2017) +
scale_y_continuous(labels = scales::label_number_si()) +
scale_fill_discrete(labels = c("BK" = "Brooklyn", "MN" = "Manhattan")) +
labs(
title = "AQI levels from March 2020-March 2021",
subtitle = "By Pollutant: Ozone and PM2.5",
fill = NULL,
x = "Date",
y = "AQI Level",
caption = "Source: EPA"
)
knitr::opts_chunk$set(echo = TRUE)
ggplot(merged_data) +
aes(x = date, y = aqi, fill = pollutant) +
geom_col(stat = "identity", position = "dodge") +
scale_x_continuous(breaks = 2007:2017) +
scale_y_continuous(labels = scales::label_number_si()) +
scale_fill_discrete(labels = c("BK" = "Brooklyn", "MN" = "Manhattan")) +
labs(
title = "AQI levels from March 2020-March 2021",
subtitle = "By Pollutant: Ozone and PM2.5",
fill = NULL,
x = "Date",
y = "AQI Level",
caption = "Source: EPA"
)
merged_data %>%
filter(pollutant %in% c("Ozone")) %>%
ggplot(merged_data) +
aes(x = date, y = aqi, fill = pollutant) +
geom_col(stat = "identity", position = "dodge") +
scale_x_continuous(breaks = 2007:2017) +
scale_y_continuous(labels = scales::label_number_si()) +
scale_fill_discrete(labels = c("BK" = "Brooklyn", "MN" = "Manhattan")) +
labs(
title = "AQI levels from March 2020-March 2021",
subtitle = "By Pollutant: Ozone and PM2.5",
fill = NULL,
x = "Date",
y = "AQI Level",
caption = "Source: EPA"
)
merged_data %>%
filter(pollutant %in% c("Ozone")) %>%
ggplot(merged_data) +
aes(x = date, y = aqi, fill = pollutant) +
geom_col(stat = "identity", position = "dodge") +
scale_x_continuous(breaks = 2007:2017) +
scale_y_continuous(labels = scales::label_number_si()) +
scale_fill_discrete(labels = c("BK" = "Brooklyn", "MN" = "Manhattan")) +
labs(
title = "AQI levels from March 2020-March 2021",
subtitle = "By Pollutant: Ozone and PM2.5",
fill = NULL,
x = "Date",
y = "AQI Level",
caption = "Source: EPA"
)
ggplot(merged_data) +
aes(x = date, y = aqi, fill = pollutant) +
geom_col(stat = "identity", position = "dodge") +
scale_x_continuous(breaks = 2020:2021) +
scale_y_continuous(labels = scales::label_number_si()) +
labs(
title = "AQI levels from March 2020-March 2021",
subtitle = "By Pollutant: Ozone and PM2.5",
fill = NULL,
x = "Date",
y = "AQI Level",
caption = "Source: EPA"
)
merged_data %>%
filter(pollutant %in% c("Ozone")) %>%
ggplot(merged_data) +
aes(x = date, y = aqi, fill = pollutant) +
geom_col() +
scale_x_continuous(breaks = 2020:2021) +
scale_y_continuous(labels = scales::label_number_si()) +
labs(
title = "AQI levels from March 2020-March 2021",
subtitle = "By Pollutant: Ozone and PM2.5",
fill = NULL,
x = "Date",
y = "AQI Level",
caption = "Source: EPA"
)
merged_data %>%
filter(pollutant %in% c("Ozone")) %>%
ggplot(merged_data) +
aes(x = date, y = aqi, fill = pollutant) +
geom_col() +
scale_x_continuous(breaks = 2020:2021) +
scale_y_continuous(labels = scales::label_number_si()) +
labs(
title = "AQI levels from March 2020-March 2021",
subtitle = "Pollutant: Ozone",
fill = NULL,
x = "Date",
y = "AQI Level",
caption = "Source: EPA"
)
plot(deaths, aqi)
?plot
ggplot(merged_data) +
aes(x = date, y = aqi, color = pollutant) +
geom_line() +
scale_x_continuous(breaks = 2020:2021) +
scale_y_continuous(labels = scales::label_number_si()) +
labs(
title = "AQI Levels from March 2020-March 2021",
subtitle = "By Pollutant: Ozone and PM2.5",
color = NULL,
x = "Date",
y = "AQI Level",
caption = "Source: EPA"
)
ggplot(merged_data) +
aes(x = date, y = deaths, fill = county) +
geom_col(stat = "identity", position = "dodge") +
scale_x_continuous(breaks = 2020:2021) +
scale_y_continuous(labels = scales::label_number_si()) +
labs(
title = "COVID Deaths in NYS from March 2020-March 2021",
subtitle = "By County",
fill = NULL,
x = "Date",
y = "COVID Deaths",
caption = "Source: NYS Health"
)
ggplot(merged_data) +
aes(x = date, y = deaths, color = county) +
geom_line() +
scale_x_continuous(breaks = 2020:2021) +
scale_y_continuous(labels = scales::label_number_si()) +
labs(
title = "COVID Deaths in NYS from March 2020-March 2021",
subtitle = "By County",
color = NULL,
x = "Date",
y = "COVID deaths",
caption = "Source: NYS Health"
)
merged_data %>%
group_by(pollutant) %>%
summarize(avg_AQI = mean(aqi))
ungroup(merged_data)
merged_data %>%
group_by(county) %>%
summarize(avg_death = mean(deaths))
ungroup(merged_data)
merged_data %>%
group_by(county) %>%
group_by(aqi) %>%
summarize(avg_aqi = mean(aqi))
ungroup(merged_data)
merged_data %>%
group_by(county) %>%
summarize(avg_aqi = mean(aqi))
ungroup(merged_data)
merged_data %>%
group_by(pollutant, county) %>%
summarize(avg_AQI = mean(aqi))
ungroup(merged_data)
merged_data %>%
group_by(pollutant) %>%
summarize(avg_AQI = mean(aqi))
ungroup(merged_data)
ggplot(merged_data) +
aes(x = date, y = aqi, fill = pollutant) +
geom_col(stat = "summary", position = "dodge") +
scale_x_continuous(breaks = 2020:2021) +
scale_y_continuous(labels = scales::label_number_si()) +
labs(
title = "AQI levels from March 2020-March 2021",
subtitle = "By Pollutant: Ozone and PM2.5",
fill = NULL,
x = "Date",
y = "AQI Level",
caption = "Source: EPA"
)
ggplot(merged_data) +
aes(x = date, y = aqi, fill = pollutant) +
geom_col(stat = "identity", position = "dodge") +
scale_x_continuous(breaks = 2020:2021) +
scale_y_continuous(labels = scales::label_number_si()) +
labs(
title = "AQI levels from March 2020-March 2021",
subtitle = "By Pollutant: Ozone and PM2.5",
fill = NULL,
x = "Date",
y = "AQI Level",
caption = "Source: EPA"
)
ggplot(merged_data) +
aes(x = date, y = aqi, fill = pollutant) +
geom_col(stat = "identity", position = "dodge") +
theme_minimal() +
scale_x_continuous(breaks = 2020:2021) +
scale_y_continuous(labels = scales::label_number_si()) +
labs(
title = "AQI levels from March 2020-March 2021",
subtitle = "By Pollutant: Ozone and PM2.5",
fill = NULL,
x = "Date",
y = "AQI Level",
caption = "Source: EPA"
)
ggplot(merged_data) +
aes(x =(deaths), y = aqi, fill=pollutant ) +
geom_bar(stat = "summary", width=1.75, position=position_dodge()) +
theme_minimal() +
coord_cartesian(xlim = c(2020,2021), ylim = c(0,165)) +
labs(
title = "Feeling Thermometer of Liberals by Year",
subtitle = "Factored by Party",
x = "Year",
y = "Feeling Thermometer",
caption = "Data via ANES",
)
ggplot(data = merged_data) +
aes(x = deaths, y = aqi) +
geom_col() +
coord_flip() +
scale_y_continuous(labels = scales::comma) +
labs(
title = 'AQI by county',
subtitle = "Ozone and PM2.5",
x = NULL,
y = "AQI level",
caption = "Source: EPA"
)
ggplot(data = merged_data) +
aes(x = date, y = aqi) +
geom_col() +
coord_flip() +
scale_y_continuous(labels = scales::comma) +
labs(
title = 'AQI by county',
subtitle = "Ozone and PM2.5",
x = NULL,
y = "AQI level",
caption = "Source: EPA"
)
ggplot(data = merged_data) +
aes(x = date, y = aqi, color = county) +
geom_col() +
coord_flip() +
scale_y_continuous(labels = scales::comma) +
labs(
title = 'AQI by county',
subtitle = "Ozone and PM2.5",
x = NULL,
y = "AQI level",
caption = "Source: EPA"
)
ggplot(data = merged_data) +
aes(x = date, y = aqi, color = county) +
geom_col(stat = "identity", position = "dodge") +
coord_flip() +
scale_y_continuous(labels = scales::comma) +
labs(
title = 'AQI by county',
subtitle = "Ozone and PM2.5",
x = NULL,
y = "AQI level",
caption = "Source: EPA"
)
ggplot(data = merged_data) +
aes(x = county, y = deaths) +
geom_col() +
coord_flip() +
scale_y_continuous(labels = scales::comma) +
labs(
title = 'NYS COVID Deaths',
subtitle = "by county of residence",
x = NULL,
y = "Number of Deaths",
caption = "Source: NYS Health")
regression_results_with_controls <- lm(aqi ~ deaths + county + date + pollutant + number_of_sites_reporting, data = merged_data) %>%
tidy()
view(regression_results_with_controls)
tbl_regression(
regression_results_with_controls,
label = list(
"deaths" ~ "COVID Deaths",
"aqi" ~ "AQI level",
"county" ~ "County in NYS",
"pollutant" ~ "Ozone and PM2.5"
)
test_regression <- lm(aqi ~ deaths + county + date + pollutant + number_of_sites_reporting, data = merged_data) %>%
tbl_regression(
regression_results_with_controls,
label = list(
"deaths" ~ "COVID Deaths",
"aqi" ~ "AQI level",
"county" ~ "County in NYS",
"pollutant" ~ "Ozone and PM2.5"
))
library(tidyverse)
library(fs)
library(skimr)
library(ggpubr)
library(broom)
library(ggpmisc)
library(ggplot2)
library(gtsummary)
install.packages(gtsummary)
install.packages(gt)
ggplot(merged_data) +
aes(fill = pollutant) +
geom_sf(color = "white", size = 0.05) +
scale_fill_viridis_b(labels = scales::percent) +
theme_void() +
theme(legend.position = c(0.1, .75)) +
labs(
title = "Renter Share of Units",
subtitle = "New York City,Census Tracts, 2014-2018",
fill = NULL,
caption = "Sources: American Community Survey (2014-2018)"
)
install.packages(sf)
install.packages("sf")
install.packages("gtsummary")
install.packages("gt")
library(tidyverse)
library(fs)
library(skimr)
library(ggpubr)
library(broom)
library(ggpmisc)
library(ggplot2)
library(gtsummary)
library(gt)
test_regression <- lm(
aqi ~ deaths + county + date + pollutant + number_of_sites_reporting,
data = merged_data,
)
tbl_regression(
test_regression,
label = list(
"aqi" ~ "AQI Level",
"deaths" ~ "COVID Deaths in NYS",
"county" ~ "County in NYS",
"date" ~ "Date",
"pollutant" ~ "Ozone and PM2.5",
"number_of_sites_reporting" ~ "Sites where AQI measured"
)
)
test_regression <- lm(
aqi ~ deaths + county + date + pollutant + number_of_sites_reporting,
data = merged_data,
)
tbl_regression(
test_regression,
label = list(
"deaths" ~ "COVID Deaths in NYS",
"county" ~ "County in NYS",
"date" ~ "Date",
"pollutant" ~ "Ozone and PM2.5",
"number_of_sites_reporting" ~ "Sites where AQI measured"
)
)
